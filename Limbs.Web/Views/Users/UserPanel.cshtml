@using Microsoft.AspNet.Identity
@model Limbs.Web.ViewModels.UserPanelViewModel
@using Limbs.Web.Models

@{
    ViewBag.Title = "Panel usuario";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div id="cont" class="min_full">
    <article id="home">
        <h1>Hola @User.Identity.Name</h1>
        <a href="@Url.Action("PedirProtesis","Orders")"><button id="home_pedir" class="blue_button">Pedir una mano</button></a>
        <br>
        <br>
        @if (Model.Message != null)
            { <p>@Html.DisplayFor(modelOrder => Model.Message)</p> }
        @if (Model.Order != null)
        {
            <article id="tus_pedidos">
                <h2>Tus pedidos:</h2>
                <table>
                    <tr>
                        <th>Id</th>
                        <th>Fecha de solicitud</th>
                        <th>Embajador</th>
                        <th>Estado</th>
                    </tr>
                    @foreach (var order in Model.Order)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelOrder => order.Id)
                            </td>
                            <td>
                                @Html.DisplayFor(modelOrder => order.Date)
                            </td>
                            <td>
                                @Html.DisplayFor(modelOrder => order.OrderAmbassador.AmbassadorName)
                            </td>
                            @if ( order.OrderAmbassador != null)
                            {

                                <td>
                                    @Html.DisplayFor(modelOrder => order.Status)
                                </td>
                            }
                            else
                            {
                                <td>
                                    No asignada
                                </td>
                            }</tr>
                    }
                </table>
            </article>
        }
        else
        {
            <p>No tienes pedidos asignados</p>
        }
        @if (!Model.PointIsValid)
            {
            <p>Por favor modifique su dirección ya que no es valida.</p>
        }
    </article>

</div>
<script src="../../Scripts/menu.js"></script>

